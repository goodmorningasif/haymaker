"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var ajaxHistory={memory:{},length:0,add:function(t){var e=t.data,n=t.url,a=t.title;return this.memory[a]={page_data:e,url:n},this.length+=1,this.length},urlParser:function(){var t=window.location.href,e=t.split("/"),n=e.reduce(function(t,e){return"team"===e||"menu"===e?t+e:t},"");return{title:e[e.length-2],subPage:n,url:t}},assemble:function(t){var e=t.urlObj,n=t.content;return this.add({data:n,url:e.url,title:e.title})},init:function(){var t=this.urlParser();if(!this.memory[t]){var e=document.getElementById("load").outerHTML;this.assemble({urlObj:t,content:e})}return t}},ajaxReq=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.LINK,n=t.callback,a=t.resetEvents,o=void 0!==a&&a,r=new XMLHttpRequest;return r.onreadystatechange=function(){r.readyState===XMLHttpRequest.DONE&&(r.status>=200&&r.status<300?n({resp:r.response,link:e,events:o}):r.status>=400&&r.status)},r.open("GET",e,!0),r.setRequestHeader("Content-Type","application/json"),r.send(),!0},setNavClasses=function(t){var e=document.getElementsByClassName("list-link");Array.prototype.forEach.call(e,function(t){t.classList.remove("active")});var n=document.getElementsByClassName("menu-link");Array.prototype.forEach.call(n,function(t){t.children[0].classList.remove("active")});var a=document.getElementsByClassName("ajax-load");Array.prototype.forEach.call(a,function(e){var n=e.getAttribute("href"),a=n.indexOf("/menu/");if(a<0&&n===t&&e.closest(".list-link"))e.closest(".list-link").classList.add("active");else if(a>0&&n===t){var o=document.getElementById("pg-food");o.classList.add("active"),e.closest(".link").classList.add("active")}})},mountComponents=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.resp,n=t.link,a=t.popState,o=void 0!==a&&a,r=t.events,s=void 0!==r&&r,l=function(t){return ajaxHistory.add({data:t.outerHTML,url:n}),t},i=function(){var t,e,n=document.body.classList,a=document.getElementById("body_classes").classList;return(t=document.body.classList).remove.apply(t,_toConsumableArray(n)),(e=document.body.classList).add.apply(e,_toConsumableArray(a)),a};!function(t){var e=document.getElementById("ham-close"),n=document.getElementById("ham-menu"),a=n.classList.contains("active");setTimeout(function(){t.parentNode.removeChild(t),a&&e.click(),i()},250)}(function(t){var e=document.getElementById("load"),n=document.getElementById("feet");return e.classList.toggle("mount"),t.classList.toggle("mount"),e.parentNode.insertBefore(t,n),setTimeout(function(){t.classList.toggle("mount")},400),e}(function(t){var e=document.createElement("html");return e.innerHTML=t,s&&s(e),l(e.querySelector("#load"))}(e))),setNavClasses(n),o||function(t){var e={title:null,url:window.location.href};window.history.pushState(e,"",t)}(n)},setAjaxEvents=function t(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=e?e.getElementsByClassName("ajax-load"):document.getElementsByClassName("ajax-load"),a=function(e,n){e.preventDefault();var a=n.getAttribute("href"),o=window.location.href,r=ajaxHistory.memory[a];a!==o&&(r?(console.log("triggered by MOUNT in trigger",r),mountComponents({resp:ajaxHistory.memory[a].page_data,link:a,events:t})):(console.log("triggered by AJAXREQ in trigger",r,a),ajaxReq({LINK:a,callback:mountComponents,resetEvents:t})))};Array.prototype.forEach.call(n,function(t){t.addEventListener("click",function(e){a(e,t)},{capture:!0})})},popStateMethods=function(){var t=function(t){var e=Object.prototype.hasOwnProperty.call(ajaxHistory.memory,""+t.url);console.log("hasURL in popstate",e);var n=ajaxHistory.memory[t.url];e?(console.log("triggered by MOUNT in popstate",e),mountComponents({resp:n.page_data,link:t.url,popState:!0})):(console.log("triggered by AJAXREQ in popstate",e),ajaxReq({LINK:t.url,callback:mountComponents}))};window.addEventListener("popstate",function(e){t(e.state)})};setAjaxEvents(),popStateMethods(),ajaxHistory.init();